<form id="add-form" class="form-horizontal" role="form" data-toggle="validator" method="POST" action="">

    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Name')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-name" data-rule="required" class="form-control" name="row[name]" type="text" value="">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Firstprice')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-firstprice" data-rule="required" class="form-control" step="0.01" name="row[firstprice]" type="number">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Rate')}:</label>
        <div class="col-xs-12 col-sm-8">
                        
            <select  id="c-rate"   onchange="cal()" data-rule="required" class="form-control selectpicker" name="row[rate]">
                {foreach name="rateList" item="vo"}
                    <option value="{$key}" {in name="key" value="default"}selected{/in}>{$vo}</option>
                {/foreach}
            </select>

        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Di')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-di" data-rule="required" class="form-control" step="0.01" name="row[di]" type="number" value="0.00">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Monthprice')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-monthprice" data-rule="required" class="form-control" step="0.01" name="row[monthprice]" type="number">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Allprice')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-allprice" data-rule="required" onblur="cal()" class="form-control" step="0.01" name="row[allprice]" type="number">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Type')}:</label>
        <div class="col-xs-12 col-sm-8">
                        
            <select  id="c-type" data-rule="required" class="form-control selectpicker" name="row[type]">
                {foreach name="typeList" item="vo"}
                    <option value="{$key}" {in name="key" value="rongwei"}selected{/in}>{$vo}</option>
                {/foreach}
            </select>

        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Carimages')}:</label>
        <div class="col-xs-12 col-sm-8">
            <div class="input-group">
                <input id="c-carimages" data-rule="required" class="form-control" size="50" name="row[carimages]" type="text">
                <div class="input-group-addon no-border no-padding">
                    <span><button type="button" id="plupload-carimages" class="btn btn-danger plupload" data-input-id="c-carimages" data-mimetype="image/gif,image/jpeg,image/png,image/jpg,image/bmp" data-multiple="true" data-preview-id="p-carimages"><i class="fa fa-upload"></i> {:__('Upload')}</button></span>
                    <span><button type="button" id="fachoose-carimages" class="btn btn-primary fachoose" data-input-id="c-carimages" data-mimetype="image/*" data-multiple="true"><i class="fa fa-list"></i> {:__('Choose')}</button></span>
                </div>
                <span class="msg-box n-right" for="c-carimages"></span>
            </div>
            <ul class="row list-inline plupload-preview" id="p-carimages"></ul>
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Number')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-number" data-rule="required" class="form-control" name="row[number]" type="number">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Grade')}:</label>
        <div class="col-xs-12 col-sm-8">
                        
            <select  id="c-grade" data-rule="required" onchange="cal()" class="form-control selectpicker" name="row[grade]">
                {foreach name="gradeList" item="vo"}
                    <option value="{$key}" {in name="key" value="default"}selected{/in}>{$vo}</option>
                {/foreach}
            </select>

        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Maincontent')}:</label>
        <div class="col-xs-12 col-sm-8">
            <textarea id="c-maincontent" class="form-control editor" rows="5" name="row[maincontent]" cols="50"></textarea>
        </div>
    </div>
    <div class="form-group layer-footer">
        <label class="control-label col-xs-12 col-sm-2"></label>
        <div class="col-xs-12 col-sm-8">
            <button type="submit" class="btn btn-success btn-embossed disabled">{:__('OK')}</button>
            <button type="reset" class="btn btn-default btn-embossed">{:__('Reset')}</button>
        </div>
    </div>
</form>
<script>
    function cal()
    {
        myselect_1=document.getElementById("c-rate");
        var index=myselect_1.selectedIndex ;
        var rate=parseFloat(myselect_1.options[index].text);
        myselect_2=document.getElementById("c-grade");
        var index=myselect_2.selectedIndex ;
        var grade=parseFloat(myselect_2.options[index].text);
        console.log(rate);
        console.log(grade);
        var fristprice=parseFloat(document.getElementById("c-allprice").value)*rate*0.01;
        console.log(document.getElementById("c-allprice"));
        document.getElementById("c-firstprice").value=fristprice;
        var kaipiaojia=(0.83*parseFloat(document.getElementById("c-allprice").value)-fristprice+3250)/0.6315;
        var loan=kaipiaojia*0.93;
        console.log("kai"+kaipiaojia)
        var monthprice=loan/grade+loan*0.0055;
        document.getElementById("c-monthprice").value=monthprice;
    }

    
</script>